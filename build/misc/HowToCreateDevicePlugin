How to develop a new plug-in for the DataExplorer


Beim Starten der Anwendung wird in der plugin.jar/meta-inf/manifest.mf Datei nach den Services gesucht, die das Plug.in zur Verf�gung stellt, deshalb ist diese Zeile in der build.xml wichtig:
<attribute name="Export-Service" value="de.device.bantam.eStation902,  gde.device.bantam.eStationBC6,   gde.device.bantam.eStationBC610,   gde.device.bantam.eStationBC8"/>
Das sind die Ger�te, die das Plug-in implementiert und matched 1:1 zu der Ger�teimplementierungsklasse und den DeviceProperties.xml Dateien, die es in allen unterst�tzten Sprachen geben muss (gde/resource/de/eStationBC6.xml, ...).
Die Ger�te XML Dateien werden dann entsprechend der angew�hlten Sprache beim Start der Anwendung �berpr�ft und ausgepackt.

Die Ger�teklassen werden dynamisch geladen, hierbei Berechnet sich der Klassenname folgenderma�en:
        String selectedDeviceName = this.selectedActiveDeviceConfig.getDeviceImplName().replace(OSDE.STRING_BLANK, OSDE.STRING_EMPTY).replace(OSDE.STRING_DASH, OSDE.STRING_EMPTY);
        //getDeviceImplName gibt den Namen des Services ohne package zur�ck und entspricht dem Ger�tenamen der in der XML angegeben ist
        String className = "de.device." + this.selectedActiveDeviceConfig.getManufacturer().toLowerCase().replace(OSDE.STRING_BLANK, OSDE.STRING_EMPTY).replace(OSDE.STRING_DASH, OSDE.STRING_EMPTY) + "." + selectedDeviceName; //$NON-NLS-1$
        //getManufacturer gibt den Herstelleramen aus der XML zur�ck

Im Ger�teklassenkonstruktor entscheidet der Aufruf von this.configureSerialPortMenu(DeviceSerialPort.ICON_SET_START_STOP), dar�ber, ob ein Aufnahmevorgang direkt aus der Men�leiste gestartet werden kann oder nur der Port ge�ffnet wird und/oder ein Ger�tedialog zu bedienen ist.

F�r die Anbindung von Ladeger�ten sind die Implementierung folgender Klassen und Methoden wichtig:
Ger�tSerialPort.getData() ist die Standartmethode, um Daten vom Ger�t abzuholen, die dann in einem Thread, entweder timergesteuert, oder datengesteuert in den Rekords des angelegten Rekord Sets abgelegt werden (das Datenmodell findest du auf meiner Internetseite) Der eStation Lader ist datengesteuert und wartet auf der seriellen Schnittstelle auf ankommende Daten. Es wird also kein Timer verwendet, der regelm��ig Daten aus dem Ger�t abholt.
Ger�t.openCloseSerialPort() entscheidet dar�ber, was passiert, wenn man den den Knopf in der Toolbar dr�ckt.
Ger�t.addDataBufferAsRawDataPoints() bereitet den Datenpuffer am St�ck auf (aus Datei.osd)
Ger�t.convertDataBytes() macht aus diesen bytes Zahlen und wird �berall wenn n�tig benutzt
Ger�t.translateValue() und Ger�t.reversetranslateValue() wird benutzt um in der Anzeige die Skalen zu zeichnen, bzw die Tabellendaten zu berechnen. Die ausgelesenen Daten bleiben immer unver�ndert und werden nur mit 1000 multipliziert, um 3 Nachkommastellen zu erm�glichen.

Um den National Language Support (NLS) brauchst du dich erst mal nicht k�mmern, das kann man sp�ter machen, du brauchst dann auch noch einen Bereich, wo du die Messages ablegen kannst, damit es keine Doppelbenutzung gibt.
Die online-Hilfe Geschichten kann man auch nach hinten schieben, es gilt erst mal die Funktion hinzu bekommen.
